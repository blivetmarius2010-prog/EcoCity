<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Retro Bounce FIX</title>

<style>
*{margin:0;padding:0;box-sizing:border-box}
body{
  background:#111;
  display:flex;
  justify-content:center;
  align-items:center;
  height:100vh;
  font-family:monospace;
}

.console{
  background:#0e7490;
  padding:16px;
  border-radius:22px;
  width:360px;
}

.screen{
  background:#1e3a8a;
  height:240px;
  border:6px solid black;
  position:relative;
  overflow:hidden;
  image-rendering:pixelated;
}

.player{
  width:18px;
  height:18px;
  background:#22c55e;
  position:absolute;
  bottom:10px;
  left:160px;
}

.ball{
  width:26px;
  height:26px;
  background:#ef4444;
  border-radius:50%;
  position:absolute;
}

.gameover{
  position:absolute;
  inset:0;
  background:rgba(0,0,0,.85);
  display:none;
  justify-content:center;
  align-items:center;
  flex-direction:column;
  color:white;
}

.controls{
  margin-top:14px;
  display:flex;
  justify-content:space-between;
}

.btn{
  width:50px;
  height:50px;
  background:#222;
  color:white;
  border-radius:10px;
  display:flex;
  justify-content:center;
  align-items:center;
  font-size:20px;
  user-select:none;
}
</style>
</head>

<body>

<div class="console">
  <div class="screen" id="screen">
    <div class="player" id="player"></div>

    <div class="gameover" id="gameover">
      <div>GAME OVER</div>
      <button onclick="restart()">REJOUER</button>
    </div>
  </div>

  <div class="controls">
    <div class="btn" id="left">⬅️</div>
    <div class="btn" id="jump">⬆️</div>
    <div class="btn" id="right">➡️</div>
  </div>
</div>

<script>
const screen = document.getElementById("screen");
const player = document.getElementById("player");
const gameover = document.getElementById("gameover");

let px=160, py=0, vy=0;
let balls=[];
let running=true;

const GRAVITY = -0.7;
const FLOOR = 10;

function spawnBall(){
  const b=document.createElement("div");
  b.className="ball";
  b.x=Math.random()*300;
  b.y=220;
  b.vx=Math.random()<0.5?-2.2:2.2;
  b.vy=0;
  screen.appendChild(b);
  balls.push(b);
}

setInterval(()=>{ if(running) spawnBall(); },1800);

function loop(){
  if(running){
    // joueur
    vy+=GRAVITY;
    py+=vy;
    if(py<=0){py=0;vy=0;}
    player.style.bottom=(FLOOR+py)+"px";

    balls.forEach(b=>{
      // physique boule
      b.vy+=GRAVITY;
      b.y+=b.vy;
      b.x+=b.vx;

      if(b.y<=0){
        b.y=0;
        b.vy=8;
      }

      if(b.x<=0 || b.x>=314) b.vx*=-1;

      b.style.bottom=(FLOOR+b.y)+"px";
      b.style.left=b.x+"px";

      // collision réelle
      const dx=Math.abs(b.x-px);
      const dy=Math.abs(b.y-py);
      if(dx<20 && dy<20){
        end();
      }
    });
  }
  requestAnimationFrame(loop);
}

function end(){
  running=false;
  gameover.style.display="flex";
}

function restart(){
  balls.forEach(b=>b.remove());
  balls=[];
  px=160;py=0;vy=0;
  player.style.left=px+"px";
  running=true;
  gameover.style.display="none";
}

function left(){ px=Math.max(0,px-12); player.style.left=px+"px"; }
function right(){ px=Math.min(314,px+12); player.style.left=px+"px"; }
function jump(){ vy=12; }

document.getElementById("left").ontouchstart=left;
document.getElementById("right").ontouchstart=right;
document.getElementById("jump").ontouchstart=jump;

document.addEventListener("keydown",e=>{
  if(e.key==="ArrowLeft") left();
  if(e.key==="ArrowRight") right();
  if(e.key==="ArrowUp") jump();
});

loop();
</script>

</body>
</html>








